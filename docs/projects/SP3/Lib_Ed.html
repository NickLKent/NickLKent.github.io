<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Nick Kent - Liberal Arts Education at Macalester</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Nick Kent</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">Resume</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../data_viz.html"> 
<span class="menu-text">Visualizing data</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../projects/Projects.html"> 
<span class="menu-text">Projects</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#what-does-it-look-like-to-be-a-liberal-arts-student-at-macalester" id="toc-what-does-it-look-like-to-be-a-liberal-arts-student-at-macalester" class="nav-link active" data-scroll-target="#what-does-it-look-like-to-be-a-liberal-arts-student-at-macalester">What does it look like to be a liberal arts student at Macalester?</a>
  <ul class="collapse">
  <li><a href="#appendix" id="toc-appendix" class="nav-link" data-scroll-target="#appendix">Appendix</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Liberal Arts Education at Macalester</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="what-does-it-look-like-to-be-a-liberal-arts-student-at-macalester" class="level2">
<h2 class="anchored" data-anchor-id="what-does-it-look-like-to-be-a-liberal-arts-student-at-macalester">What does it look like to be a liberal arts student at Macalester?</h2>
<section id="shiny-application-httpsnkent.shinyapps.iods-finalproject" class="level6">
<h6 class="anchored" data-anchor-id="shiny-application-httpsnkent.shinyapps.iods-finalproject">Shiny Application: https://nkent.shinyapps.io/DS-FinalProject/</h6>
</section>
<section id="introduction" class="level4">
<h4 class="anchored" data-anchor-id="introduction">Introduction</h4>
<p>How do students choose to take classes in a breadth of areas to fulfill both general requirements and major specific ones? The data set we are examining shows data from Macalester students who graduated from 2013-2018 regarding information like graduation year, sex, major(s), minor(s), number of classes taken in departments/divisions etc. Because the data provides a holistic view on a student’s education, we want to examine how students of any major interact with classes. How does the number of majors change the number of classes in each division? How does major affect the number of unique departments taken? How does the division of majors affect the number of classes taken within each division? We hope that by approaching the topic from a few different perspectives such as major count, unique departments, and department variety, we can learn a little bit about what it means to be a student, regardless of what category one may fall into.</p>
</section>
<section id="distribution-of-classes-by-number-of-majors" class="level4">
<h4 class="anchored" data-anchor-id="distribution-of-classes-by-number-of-majors">Distribution of Classes by Number of Majors</h4>
<p>This visualization shows the difference in the types of classes that students take depending on how many majors they have. Selecting one, two, or three majors will subsect the data and show how many classes in each division students with the selected number of majors took. Interestingly enough, there is little difference between the number of classes a student takes with one or two majors. But you can see that when you look at the students with three majors, the Natural Science and Mathematics bar is clearly taller than the rest of the divisions. The reason for this may be because it’s easier to have multiple majors within the Natural Science and Math division because there is some overlap between the requirements for majors within that division. When looking at students with one major, Natural Science and Math, Humanities, and Social Sciences are relatively equal which shows that majors in those divisions are equally popular among students with one major. Examining the graph that shows that of students with two majors, the Humanities majors take slightly more classes than the Natural Science and Math majors. The reason for this may be because those majors often pair well with majors in other divisions. For example, students may choose to major in a language and pair that with a major in the Interdisciplinary division. There also might not be enough data to draw clear conclusions; out of the approximately 2,500 students looked at, there are about 1800 students who had one major and 650 who had two. This number drops significantly when looking at students who had three majors (19).</p>
<p><img src="onemajor.jpg" class="img-fluid" alt="1- Classes taken based on the number of majors"> <img src="twomajor.jpg" class="img-fluid" alt="2- Classes taken based on the number of majors"></p>
</section>
<section id="department-variety-by-major" class="level4">
<h4 class="anchored" data-anchor-id="department-variety-by-major">Department Variety By Major</h4>
<p>How do students take courses in and out of their major? Do some majors attract students that take many courses outside of their major? One way to explore how “diverse” Mac students are in terms of their course selection is by looking at how many total departments there are in which a student took a course. This visualization shows how many unique departments each major has taken, with the significant caveat that this filters out all students with more than one major. Doing so results in a different amount of students in each department, but is worth doing because including students with multiple majors would skew certain majors to further extremes. For example, as seen by the visualization of “Number of classes in a division by major” we see that science and math majors are more likely to have multiple majors, and those majors are often within the same division. If we included double and triple majors in this data set, science and math majors could appear significantly less diverse because those students with multiple majors are taking many classes in few departments. Between 2013 and 2018, the average number of unique department prefixes a student took over their time at Macalester was about 12 (11.88 precisely). Some notable departments with low amounts of “department diversity” are Russian Studies, Music, and Women, Gender and Sexuality Studies, and some notable departments with high amounts are American Studies, Sociology, and Latin American Studies. While Interdisciplinary and Social Sciences are the two divisions with the highest average diversity, and Humanities and Natural Science and Math are the two with the least, the divisions are still relatively similar to each other. In fact, all the divisions have between 12-13 majors, with the exception of Fine Arts, which only has three majors. One would expect, based on stereotypes, that STEM majors, for example, might be the least flexible. <img src="totalspread.jpg" class="img-fluid" alt="1- Variety of classes choices of different majors"></p>
<p>This visualization, however, shows that while there is definitely a discrepancy between majors, it is not especially large; the range between Russian Studies, the minimum, and Latin American Studies, the maximum is only 4.25. If we separate based on division, we get a similar picture, and find that the average number of departments taken for Humanities is the same as Math, around 12.1! <img src="separate.jpg" class="img-fluid" alt="2- Variety of classes choices of certain majors"> The most important conclusion of this data is that Macalester does a good job of encouraging students to take a wide variety of classes. All divisions have a similar range of unique departments (about three), and when the visualization is expanded to show all majors, the range grows to only 4.25.</p>
</section>
<section id="distribution-of-classes-taken-among-divisions" class="level4">
<h4 class="anchored" data-anchor-id="distribution-of-classes-taken-among-divisions">Distribution of Classes Taken Among Divisions</h4>
<p>Our last visualization shows the average number of classes taken in each division based on the division of the major. It’s important to note that students who had more than one major were counted twice; for example, a Math and Biology double major would have been considered two “people” and course count was considered twice. This is fine to do because if you are majoring in biology and math your class distribution should be shown as a biology major and a math major separately, since that reflects your course choice/interests as a student.<br>
The first thing we notice is that students with majors within the Natural Science and Mathematics division tend to be the most focused on their own division; the discrepancy between Science/Math classes they take and classes they take in other divisions is the greatest. On average, the number of classes that a Natural Science and Math division major would take in that division is 20. On the other hand, the same students would take on average 16 classes outside of the Natural Science and Math division. This makes sense because students majoring in Natural Science and Math departments will often have to take extra classes outside of their majors department. So for example, a physics major would have to take many physics classes, but then also take some math classes and possibly other science classes. All of these classes would be counted as a Natural Science and Math class, therefore the count of Natural Science and Math classes for a physics major(and other math and science majors) would be unusually high.</p>
<p><img src="smVSsm.jpg" class="img-fluid" alt="Natural Science and Math classes taken by Natural Science and Math majors"> <img src="smVSHum.jpg" class="img-fluid" alt="Humanities classes taken by Natural Science and Math majors"> The division that had the most equal spread of classes among the five division were the Interdisciplinary majors, which makes sense because Interdisciplinary inherently means relating to more than one branch of knowledge. Those that are learning about multiple subjects would essentially have to take classes in multiple divisions to fulfill the requirements. Another division of majors that had a more balanced variety in the average number of classes taken among divisions is the Social Science majors. To visualize the statements a little more, on average someone majoring in an Interdisciplinary major will take about 12 classes in the Interdisciplinary division, and take about 23 classes outside of the Interdisciplinary division. Similarly, students majoring in Social Sciences will on average take about 14 classes in the Social Science division, and take 20 classes outside of the Social Sciences division. So students in these divisions tend to take more classes outside of their majors division than classes in the division of their major, and you don’t see a huge change in the number of classes taken in their majors division, and classes taken outside of their majors division.</p>
<p><img src="IntVSInt.jpg" class="img-fluid" alt="Interdisciplinary classes taken by Interdisciplinary majors"> <img src="IntVSHum.jpg" class="img-fluid" alt="Humanities classes taken by Interdisciplinary majors"></p>
<p>From this visualization we learned that the division of your major directly affects the number of classes that you take in each of the five divisions.</p>
</section>
<section id="conclusion" class="level4">
<h4 class="anchored" data-anchor-id="conclusion">Conclusion</h4>
<p>To answer the question of what the Macalester Liberal Arts experience looks like, we used a data set describing information about Macalester Students from 2013-2018, and created three different interactive visualizations that explore different aspects of student course choice. Our first visualization explored the relationship between number of majors and classes in each division. In it, we see that single-major students tend to take more classes in the Natural Science and Mathematics, Non-divisional and Social Science divisions, revealing which are the most popular. Students with 3 majors tend to take more classes in Natural Science and Math, showing that people with three majors are more likely majoring in a math or science department. In our second visualization, showing the relationships between major and amount of unique departments taken, we learn that Macalester does a good job of encouraging a variety of class choices, and regardless of major, students take classes in between 10-14 departments, with the exact average being 11.88. Our final visualization shows the relationship between the number of classes taken in each division based on major. This visualization shows that students in the Natural Science and Math division tend to stay within their division more than other divisions. Interdisciplinary, Social Science or Humanities have a more even spread between classes inside and outside of their division.</p>
</section>
<section id="appendix" class="level3">
<h3 class="anchored" data-anchor-id="appendix">Appendix</h3>
<p><a href="../../projects/SP3/Project_Code_and_Data.html">Data Wrangling</a></p>
<p><a href="app.R">Shiny App Code</a></p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>